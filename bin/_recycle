recycle() {
    recycler_dir=$RECYCLER_DIR
    if [[ -z $recycler_dir ]]; then
        recycler_dir="$HOME/dev/recycler"
    fi

    recycler_base=$(basename "$recycler_dir")

    query=$1
    if [[ -n $query ]]; then
        query="--query=$query"
    fi

    # because you can't tell fd to print relative paths when the search dir is absolute
    pushd -q
    cd $recycler_dir
    selection=$(fd --color never --type file -E 'bin\*' -E 'readme.md' -E 'project.godot' -E '*.import' -E 'examples/*' | fzf $query)
    popd -q

    if [ -z $selection ]; then
        return
    fi

    printf "\e[36mcopy to where? \e[30m(${selection})\e[0m "
    read -r user_path

    if [[ -z $user_path ]]; then
        user_path="$selection"
    fi

    selection_full_path="$recycler_dir/$selection"
    user_path_parent=${user_path%/*}

    mkdir -p "$user_path_parent"
    cp "$selection_full_path" "$user_path"

    echo "recycled $selection to $user_path"
}
